---
layout: post
title:  "各消息队列对比"
date:   2020-10-08 09:58:06 +0800--
categories: [Java, 分布式]
tags: [Java, 消息队列]  
---

# 各消息队列对比

![image-20201008111256984](/Users/silince/Pictures/Typora/image-20201008111256984.png)

# 总结

## ActiveMQ

- 非常成熟，功能强大，在业内大量的公司以及项目都有应用；
- 偶尔会有较低概率丢失消息；
- 现在社区以及国内应用都越来越少，官方社区现在对ActiveMQ5.x维护越来越少，几个月才发布一个版本；
- 确实主要是基于解耦和异步来用的，较少在大规模吞吐的场景中使用。

## RabbitMQ

- erlang语言开发的，性能极其好，延时很低；
- 吞吐量到万级，MQ功能比较完备；
- 开源提供管理界面非常棒，用起来很好用；
- 社区很活跃，几乎每个月发布几个版本；
- 国内一些互联网公司近几年用RabbitMQ比较多一些；
- 问题是RabbitMQ的吞吐量也会低一些，这是应为它做的实现机制比较重；
- 而且erlang开发，国内有几个公司有实力做erlang源码级别的研究和定制？如果说你没这个实力的话，确实偶尔会有一些问题，很难去看懂源码，公司对这个东西的掌控很弱，基本只能依赖于开源社区的快速维护和修复bug；
- 而且Rabbitmq集群动态扩展会很麻烦，不过这个我觉得还好。其实主要是erlang语言本身带来的问题。很难读源码，很难定制和掌控。

## RocketMQ

- 接口简单易用，而且毕竟在阿里大规模应用过，有阿里品牌保障；
- 日处理消息上百亿之多，可以做到大规模吞吐，性能也非常好，分布式扩展也很方便，社区维护还可以，可靠性和可用性都是ok的，还可以支撑大规模的topic数量，支持复杂MQ业务场景；
- 而且一个很大的优势在于，阿里出品都是java系的，我们可以自己阅读源码，定制自己公司的MQ，可以掌控；
- 社区活跃度相对较为一般，不过也还可以，文档相对来说简单一些，然后接口这块不是按照标准JMS规范走的有些系统要迁移需要修改大量代码；
- 还有就是阿里出台的技术，你得做好这个技术万一被抛弃，社区黄掉的风险，那如果你们公司有技术实力我觉得用RocketMQ挺好的；

## Kafka

- kafka的特点其实很明显，就是仅仅提供较少的核心功能，但是提供超高的吞吐量，ms级的延迟，极高的可用性以及可靠性，而且分布式可以任意扩展；
- 同时kafka最好是支撑较少的topic数量即可，保证其超高吞吐量；
- 而且kafka唯一的一点劣势是有可能消息重复消费，那么对数据准确性会造成极其轻微的影响，在大数据领域中以及日志采集中，这点轻微影响可以忽略；
- 这个特性天然适合大数据实时计算以及日志收集。

## 选型建议

综上，各种对比之后，有如下建议：

一般的业务系统要引入 MQ，最早大家都用 ActiveMQ，但是现在确实大家用的不多了，没经过大规模吞吐量场景的验证，社区也不是很活跃，***不推荐用这个了***；

后来大家开始用 RabbitMQ，但是确实 erlang 语言阻止了大量的 Java 工程师去深入研究和掌控它，对公司而言，几乎处于不可控的状态，但是确实人家是开源的，比较稳定的支持，活跃度也高；

不过现在确实越来越多的公司会去用 RocketMQ，确实很不错，***毕竟是阿里出品，但社区可能有突然黄掉的风险（目前 RocketMQ 已捐给 Apache，但 GitHub 上的活跃度其实不算高）对自己公司技术实力有绝对自信的，推荐用 RocketMQ，否则回去老老实实用 RabbitMQ 吧***，人家有活跃的开源社区，绝对不会黄。

***所以中小型公司，技术实力较为一般，技术挑战不是特别高，用 RabbitMQ 是不错的选择；大型公司，基础架构研发实力较强，用 RocketMQ 是很好的选择。***

***如果是大数据领域的实时计算、日志采集等场景，用 Kafka 是业内标准的，绝对没问题，社区活跃度很高，绝对不会黄，何况几乎是全世界这个领域的事实性规范。***

