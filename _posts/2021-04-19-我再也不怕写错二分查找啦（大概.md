---
layout: post
title:  "æˆ‘å†ä¹Ÿä¸æ€•å†™é”™äºŒåˆ†æŸ¥æ‰¾å•¦ï¼ˆå¤§æ¦‚"
date:   2021-04-19 14:10:06 +0800--
categories: [æ•°æ®ç»“æ„]
tags: [æ•°æ®ç»“æ„, ]  


---

# å‰è¨€

ä¹‹å‰çœ‹äº†labuladongçš„äºŒåˆ†æ¨¡ç‰ˆï¼Œä»¥ä¸ºè‡ªå·±æ‡‚äº†ï¼Œç»“æœé‡åˆ°é¢˜ç›®è¿˜æ˜¯åˆ°å¤„åƒç˜ªï¼Œå„ç§ç»†èŠ‚ç›´æ¥ç—›è‹¦é¢å…·æ”¾å¼ƒæ€è€ƒ ğŸ˜­

æœ€è¿‘çœ‹åˆ°ä¸€ä¸ªè®²äºŒåˆ†æŸ¥æ‰¾çš„è§†é¢‘ï¼Œæ„Ÿè§‰æˆ‘åˆè¡Œäº†ï¼ç‰¹æ­¤è®°å½•ä¸€ä¸‹è¯¥æ–¹æ³•ï¼Œä¸»è¦æ€æƒ³å°±æ˜¯ï¼šæŠŠçº¢è“åŒºåŸŸå›ºå®šï¼Œç„¶åé€šè¿‡é€‰æ‹©è¿”å›çš„rï¼Œlè·å¾—ä¸Šç•Œå’Œä¸‹ç•Œï¼Œè¿™æ ·å–åŒºåŸŸä¸è¿”å›å€¼å¯ä»¥æ›´åŠ çµæ´»å¤šå˜ã€‚

æ¯”å¦‚ åœ¨ä¸€æ®µé›†åˆé‡Œ [1,2,3,5,5,5,8,9] å¯ä»¥æœ‰å››ç§æƒ…å†µ ï¼Œè¦å¦‚ä½•è¿›è¡ŒäºŒåˆ†çš„è®¾è®¡ï¼Ÿ

1. æ‰¾åˆ°ç¬¬ä¸€ä¸ª `>=5` çš„å…ƒç´  
2. æ‰¾åˆ°æœ€åä¸€ä¸ª`<5` çš„å…ƒç´  
3. æ‰¾åˆ°ç¬¬ä¸€ä¸ª `>5 `çš„å…ƒç´ 
4. æ‰¾åˆ°æœ€åä¸€ä¸ª `<=5` çš„å…ƒç´  

![image-20210419104749739](/assets/imgs/image-20210419104749739.png)



ã€ŒäºŒåˆ†ã€çš„æœ¬è´¨æ˜¯ä¸¤æ®µæ€§ï¼Œå¹¶éå•è°ƒæ€§ã€‚åªè¦ä¸€æ®µæ»¡è¶³æŸä¸ªæ€§è´¨ï¼Œå¦å¤–ä¸€æ®µä¸æ»¡è¶³æŸä¸ªæ€§è´¨ï¼Œå°±å¯ä»¥ç”¨ã€ŒäºŒåˆ†ã€ã€‚



# ç®—æ³•æµç¨‹

å¯¹äºä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥å°†äºŒåˆ†æŸ¥æ‰¾ä»»åŠ¡è½¬æ¢ä¸ºå¯»æ‰¾å…¶ `è“çº¢è¾¹ç•Œ` ï¼Œå³æ±‚å‡ºæœªçŸ¥æ•°K-1å’ŒKçš„ä½ç½®ã€‚ï¼ˆtarget=5ï¼‰

![image-20210419105129479](/assets/imgs/image-20210419105129479.png)

1ï¼‰é¦–å…ˆæ•´ä¸ªæ•°ç»„éƒ½æ˜¯ç°è‰²çš„ï¼Œè“çº¢æŒ‡é’ˆä¸ºåˆ«åˆå§‹åŒ–ä½-1å’Œæ•°ç»„é•¿åº¦lengthã€‚é¦–å…ˆæŸ¥çœ‹æ•°ç»„æœ€ä¸­é—´çš„å…ƒç´  `4` ä¸ºè“è‰²ï¼Œæ‰€ä»¥å°†è“è‰²è¾¹ç•Œç›´æ¥æ‰©å±•åˆ°è¯¥å…ƒç´ æ‰€åœ¨ä½ç½®ã€‚

![image-20210419105949499](/assets/imgs/image-20210419105949499.png)

2ï¼‰ç»§ç»­ä¸Šè¿°æ­¥éª¤ï¼Œè§‚å¯Ÿç°è‰²åŒºåŸŸä¸­æœ€ä¸­é—´çš„å…ƒç´  `6` ä¸ºçº¢è‰²ï¼Œæ‰€ä»¥å°†çº¢è‰²æŒ‡é’ˆæ‰©å±•åˆ°è¯¥å…ƒç´ æ‰€åœ¨çš„ä½ç½®ã€‚

![image-20210419110149133](/assets/imgs/image-20210419110149133.png)

3ï¼‰ä¸€ç›´é‡å¤æ‰§è¡Œä¸Šè¿°æ“ä½œï¼Œæœ€åå°±èƒ½å¤Ÿæ‰¾åˆ°è“çº¢è¾¹ç•Œï¼š

![image-20210419110252619](/assets/imgs/image-20210419110252619.png)



# ä¼ªä»£ç 

- åˆå§‹ï¼š`l` æŒ‡å‘è“è‰²åŒºåŸŸï¼Œ `r` æŒ‡å‘çº¢è‰²åŒºåŸŸ
- å¾ªç¯ï¼š `l` ã€ `r`  å¿«é€Ÿå‘è“çº¢è¾¹ç•Œé€¼è¿‘ï¼Œ**å¹¶ä¿æŒ  `l` ã€ `r`   é¢œè‰²ä¸æ”¹å˜**
- ç»“æŸï¼š `l` ã€ `r`  åˆšå¥½æŒ‡å‘è“çº¢è¾¹ç•Œ

```java
l = -1, r = N // é¦–å…ˆåˆå§‹åŒ–ä¸¤ä¸ªæŒ‡é’ˆï¼ŒlæŒ‡å‘-1ï¼ŒræŒ‡å‘æ•°ç»„é•¿åº¦N
while (l+1 ï¼= r){ // å¾ªç¯ç›´è‡³l+1 = r
  m = (l+r)/2 // æ±‚å‡ºç°è‰²æ•°ç»„ä¸­é—´å…ƒç´ çš„ä½ç½®ï¼Œå¹¶å‘ä¸‹å–æ•´ï¼ˆæ³¨æ„æº¢å‡ºï¼‰
  if isBlue(m) l = m // å¦‚æœlçš„é¢œè‰²ä¸ºè“è‰²ï¼Œå°±æŠŠè“è‰²åŒºåŸŸæ‹“å±•åˆ°m (æŠŠ m èµ‹å€¼ç»™ å·¦æŒ‡é’ˆ)
  else r = m // å¦åˆ™çº¢è‰²åŒºåŸŸæ‰©å±•åˆ°m (æŠŠmèµ‹å€¼ç»™å³æŒ‡é’ˆ)
}
return l or r  // æ­¤æ—¶çš„lå’Œråˆšåˆšå¥½æŒ‡å‘è“çº¢è¾¹ç•Œï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿”å›lè¿˜æ˜¯r
```

é˜²æ­¢æº¢å‡ºï¼š

```java
if(x == Integer.MAX_VALUE){
  m = (right+left)/2;
}else{
  m = (right-left)/2+left;
}
// æˆ–è€…ç›´æ¥ç”¨longæ¥æ”¶ ç„¶åè½¬æ¢ä¸ºint
Integer.parseInt(String.valueOf(m))
```



# æŸ¥æ‰¾å…ƒç´ ä¸å­˜åœ¨æ€ä¹ˆåŠ

> å› ä¸ºleftæŒ‡é’ˆå§‹ç»ˆåœ¨rightæŒ‡é’ˆä¹‹åï¼ŒæŸ¥æ‰¾ä¸Šç•Œæ—¶ä¼šå­˜åœ¨ä¸‰ç§æƒ…å†µï¼ˆæ­¤æ—¶è¿”å›çš„æ˜¯rightæŒ‡é’ˆï¼‰ï¼š

-  [5,6,8,8,9] target = 1 => right = 0 ï¼ˆæ­¤æ—¶nums[right]!=targetï¼‰
-  [5,6,8,8,9] target = 10 => right = nums.lengthï¼ˆè¶Šç•Œäº†ï¼‰
-  [5,6,8,8,9] target = 7 => right = 2 (å¦‚æœtargetåœ¨æ•°ç»„ä¸­çš„è¯ï¼Œä¼šè¿”å›åˆšå¥½å¤§äºtargetçš„å€¼ã€‚åŒæ ·çš„ï¼Œæ­¤æ—¶nums[right]!=target)

```java
int left = -1;
int right = nums.length;

while (left + 1 != right) {
  int m = (left + right) / 2;
  if (nums[m]<target){
    left = m;
  }else {
    right=m;
  }
}
if (right==nums.length||nums[right]!=target){
  right = -1;
}
return right;
```

> æŸ¥æ‰¾ä¸‹ç•Œæ—¶ï¼Œè¿”å›çš„leftæŒ‡é’ˆï¼ŒåŒæ ·ä¹Ÿæ˜¯ä¸‰ç§æƒ…å†µï¼š

-  [5,6,8,8,9] target = 1 => left = -1 ï¼ˆè¶Šç•Œäº†ï¼‰
-  [5,6,8,8,9] target = 10 => left = nums.length-1ï¼ˆæ­¤æ—¶nums[right]!=targetï¼‰
-  [5,6,8,8,9] target = 7 => left = 1 (å¦‚æœtargetåœ¨æ•°ç»„ä¸­çš„è¯ï¼Œä¼šè¿”å›åˆšå¥½å°äºtargetçš„å€¼ã€‚åŒæ ·çš„ï¼Œæ­¤æ—¶nums[right]!=target)

```java
int left = -1;
int right = nums.length;

while (left + 1 != right) {
  int m = (left + right) / 2;
  if (nums[m]<=target){
    left = m;
  }else {
    right=m;
  }
}

if (left==-1||nums[left]!=target){
  left=-1;
}
return left;
```





# ç»†èŠ‚é—®é¢˜

> ç»†èŠ‚1ï¼šä¸ºä»€ä¹ˆ l çš„åˆå§‹å€¼ä¸º-1 ï¼Œr çš„åˆå§‹å€¼ä¸º N

å½“låˆå§‹åŒ–ä¸º0çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæ•´ä¸ªæ•°ç»„éƒ½æ˜¯çº¢è‰²ï¼Œlä¸€å¼€å§‹åˆ™ä¼šè½äºçº¢è‰²åŒºåŸŸå†…ã€‚råˆå§‹åŒ–ä¸ºN-1åŒç†ã€‚

![image-20210419133318776](/assets/imgs/image-20210419133318776.png)



> ç»†èŠ‚2ï¼šm æ˜¯å¦æ˜¯ç§å¤„äº[0,N)çš„å·¦é—­å³å¼€åŒºé—´ä»¥å†…

åªæœ‰`m`å±äº[0,N)çš„å·¦é—­å³å¼€åŒºé—´ä»¥å†…ï¼ŒisBlue(m) åˆ¤æ–­é¢œè‰²æ‰æ˜¯æœ‰æ„ä¹‰çš„ã€‚

å…ˆæ¥çœ‹`m`çš„ä¸‹ç•Œï¼šå› ä¸º `m = (l+r)/2`, åªè¦è®©`l`ã€`r`å°½å¯èƒ½çš„å°å³å¯ã€‚`l`çš„æœ€å°å€¼å³ä¸ºä»–çš„åˆå§‹å€¼`-1`ï¼Œå¯¹äº`r` è€Œè¨€ï¼Œå¦‚æœä»–èƒ½è¿›å…¥å¾ªç¯ä½“ï¼Œä»–çš„æœ€å°å€¼ä¸º`1`ã€‚ å› æ­¤`m`çš„æœ€å°å€¼å³ä¸º `(-1+1)/2=0`ã€‚

å†æ¥çœ‹`m`çš„ä¸Šç•Œï¼šè¦è®©`l`ã€`r`å°½å¯èƒ½çš„å¤§å³å¯ï¼Œ`r` çš„æœ€å¤§å€¼ä¸º Nï¼Œ `l` åˆ™ä¸ºN-2 ï¼Œ `m` çš„æœ€å¤§å€¼åˆ™ä¸º N-1ã€‚

å› æ­¤ `m` å§‹ç»ˆå¤„äºäº[0,N)çš„å·¦é—­å³å¼€åŒºé—´ä»¥å†…ï¼Œå³`m`ä¸ä¼šæº¢å‡ºã€‚

> ç»†èŠ‚3ï¼šæ›´æ–°æŒ‡é’ˆçš„æ—¶å€™ï¼Œèƒ½ä¸èƒ½å†™æˆ l = m +1 æˆ–è€… r = m - 1

å¯¹äºä¸‹å›¾çš„æƒ…å†µï¼Œåœ¨æŸæ¬¡å¾ªç¯ä¸­`m`åˆšåˆšå¥½æŒ‡å‘è“è‰²åŒºåŸŸçš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœ `l = m +1` å°±ä¼šè®©læŒ‡å‘çº¢è‰²åŒºåŸŸé€ æˆäº†é”™è¯¯ã€‚` r = m - 1`åŒç†ã€‚

![image-20210419134458329](/assets/imgs/image-20210419134458329.png)

> ç»†èŠ‚4ï¼šç¨‹åºä¼šä¸ä¼šé™·å…¥æ­»å¾ªç¯

æ— è®º`l`å’Œ`r` ä¹‹é—´éš”äº†å¤šå°‘ä¸ªå…ƒç´ ï¼Œéƒ½ä¸€å®šä¼šé€€åŒ–åˆ°ç¬¬ä¸€ç§æƒ…å†µå¹¶é€€å‡ºå¾ªç¯ã€‚

 ![image-20210419135430099](/assets/imgs/image-20210419135430099.png)



# æ€»ç»“

å¯¹äºå‰è¨€ä¸­çš„é—®é¢˜ï¼Œç»“åˆä»¥ä¸Šåˆ†æå¯å½’çº³å‡ºäºŒåˆ†æŸ¥æ‰¾è®¾è®¡çš„ä¸€èˆ¬æµç¨‹ï¼š

- å»ºæ¨¡ï¼šåˆ’åˆ†è“çº¢åŒºåŸŸï¼Œç¡®å®š `isBlue()`å‡½æ•°çš„æ¡ä»¶
- ç¡®å®šè¿”å›`l` è¿˜æ˜¯ `r`
- å¥—ç”¨ä¼ªä»£ç æ¨¡ç‰ˆ
- å¦‚æœæœ‰éœ€è¦åˆ™åŠ å…¥ä¸€ä¸‹é¢„å¤„ç†æˆ–åå¤„ç†é€»è¾‘

![image-20210419140058088](/assets/imgs/image-20210419140058088.png)

```java
// case0: å•çº¯çš„æŸ¥æ‰¾targetçš„ä¸‹æ ‡(æ— é‡å¤å…ƒç´ )ï¼Œä¸å­˜åœ¨è¿”å›-1
private int binarySearch(int[] arr,int target) {
  int left = -1;
  int right = arr.length;

  while (left+1!=right){
    int m = (right-left)/2 + left; // å› ä¸ºleft=-1ï¼Œæ‰€ä»¥è¿˜æ˜¯å¯èƒ½ä¼šæº¢å‡º
    if (arr[m]<=target){
      left = m;
    }else {
      right = m;
    }

  }

  // ä¸å­˜åœ¨çš„æƒ…å†µ
  if (left==-1||arr[left]!=target){ // å•çº¯æ— é‡å¤å…ƒç´ çš„æŸ¥æ‰¾è¿˜éœ€è¦è€ƒè™‘å…ƒç´ åœ¨æ•°ç»„ä¸­ä½†æ˜¯ä¸ç›¸ç­‰çš„æƒ…å†µ
    left = -1;
  }

  return left;
}


// case1: å¯»æ‰¾ç¬¬ä¸€ä¸ª >=target çš„å…ƒç´ çš„ä¸‹æ ‡ï¼Œä¸å­˜åœ¨è¿”å›-1 (æ‰¾ä¸‹ç•Œ)
private int binarySearch(int[] arr,int target) {
  int left = -1;
  int right = arr.length;

  while (left+1!=right){
    int m = (right-left)/2 + left; // å› ä¸ºleft=-1ï¼Œæ‰€ä»¥è¿˜æ˜¯å¯èƒ½ä¼šæº¢å‡º
    if (arr[m]<target){
      left = m;
    }else {
      right = m;
    }

  }

  // ä¸å­˜åœ¨çš„æƒ…å†µ
  if (right==arr.length){
    right = -1;
  }

  return right;
}
// case2: å¯»æ‰¾æœ€åä¸€ä¸ª <target çš„å…ƒç´ çš„ä¸‹æ ‡ï¼Œä¸å­˜åœ¨è¿”å›-1
private int binarySearch(int[] arr,int target) {
  int left = -1;
  int right = arr.length;

  while (left+1!=right){
    int m = (right+left)/2;
    if (arr[m]<target){
      left = m;
    }else {
      right = m;
    }

  }
  // ä¸å­˜åœ¨çš„æƒ…å†µ
  if (left==-1){
    left = -1;
  }

  return left;
}
// case3: å¯»æ‰¾ç¬¬ä¸€ä¸ª >target çš„å…ƒç´ çš„ä¸‹æ ‡ï¼Œä¸å­˜åœ¨è¿”å›-1
private int binarySearch(int[] arr,int target) {
  int left = -1;
  int right = arr.length;

  while (left+1!=right){
    int m = (right+left)/2;
    if (arr[m]<=target){
      left = m;
    }else {
      right = m;
    }

  }
  // ä¸å­˜åœ¨çš„æƒ…å†µ
  if (right==arr.length){
    right = -1;
  }

  return right;
}
// case4: å¯»æ‰¾æœ€åä¸€ä¸ª <=target çš„å…ƒç´ çš„ä¸‹æ ‡ï¼Œä¸å­˜åœ¨è¿”å›-1  (æ‰¾ä¸Šç•Œ)
private int binarySearch(int[] arr,int target) {
  int left = -1;
  int right = arr.length;

  while (left+1!=right){
    int m = (right+left)/2;
    if (arr[m]<=target){
      left = m;
    }else {
      right = m;
    }

  }
  // ä¸å­˜åœ¨çš„æƒ…å†µ
  if (left==-1){
    left = -1;
  }

  return left;
}
```



# åˆ·é¢˜æ—¶é—´

## [69. x çš„å¹³æ–¹æ ¹](https://leetcode-cn.com/problems/sqrtx/)

> é¢˜ç›®

```java
å®ç°Â int sqrt(int x)Â å‡½æ•°ã€‚
è®¡ç®—å¹¶è¿”å›Â xÂ çš„å¹³æ–¹æ ¹ï¼Œå…¶ä¸­Â x æ˜¯éè´Ÿæ•´æ•°ã€‚
ç”±äºè¿”å›ç±»å‹æ˜¯æ•´æ•°ï¼Œç»“æœåªä¿ç•™æ•´æ•°çš„éƒ¨åˆ†ï¼Œå°æ•°éƒ¨åˆ†å°†è¢«èˆå»ã€‚

ç¤ºä¾‹ 1:
è¾“å…¥: 4
è¾“å‡º: 2
```

> è§£æ

è¿”å›ç±»å‹æ˜¯åªä¿ç•™æ•´æ•°éƒ¨åˆ†ï¼Œé‚£ä¹ˆä¸å°±æ˜¯è¦æˆ‘ä»¬æ‰¾åˆ° $mid<=\sqrt{x}$çš„ä¸Šç•Œå—

- æ‰©å¤§è“è‰²çš„æ¡ä»¶ï¼š`m*m<=x` éƒ½å±äºè“è‰²
- è¿”å›`l` 

```java
public int mySqrt(int x) {
  if (x==0) return 0;
  if (x==1) return 1;

  int left = -1;
  int right = x;
  int m = 0;

  while (left+1!=right){
    if(x == Integer.MAX_VALUE){
      m = (right+left)/2;
    }else{
      m = (right-left)/2+left;
    }
    
    if ((long)m*m<=x){
      left = m;
    }else {
      right = m;
    }

  }
  return left;
}
```

## [278. ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬](https://leetcode-cn.com/problems/first-bad-version/)

> é¢˜ç›®

```java
ä½ æ˜¯äº§å“ç»ç†ï¼Œç›®å‰æ­£åœ¨å¸¦é¢†ä¸€ä¸ªå›¢é˜Ÿå¼€å‘æ–°çš„äº§å“ã€‚ä¸å¹¸çš„æ˜¯ï¼Œä½ çš„äº§å“çš„æœ€æ–°ç‰ˆæœ¬æ²¡æœ‰é€šè¿‡è´¨é‡æ£€æµ‹ã€‚ç”±äºæ¯ä¸ªç‰ˆæœ¬éƒ½æ˜¯åŸºäºä¹‹å‰çš„ç‰ˆæœ¬å¼€å‘çš„ï¼Œæ‰€ä»¥é”™è¯¯çš„ç‰ˆæœ¬ä¹‹åçš„æ‰€æœ‰ç‰ˆæœ¬éƒ½æ˜¯é”™çš„ã€‚
å‡è®¾ä½ æœ‰ n ä¸ªç‰ˆæœ¬ [1, 2, ..., n]ï¼Œä½ æƒ³æ‰¾å‡ºå¯¼è‡´ä¹‹åæ‰€æœ‰ç‰ˆæœ¬å‡ºé”™çš„ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚
ä½ å¯ä»¥é€šè¿‡è°ƒç”¨Â bool isBadVersion(version)Â æ¥å£æ¥åˆ¤æ–­ç‰ˆæœ¬å· version æ˜¯å¦åœ¨å•å…ƒæµ‹è¯•ä¸­å‡ºé”™ã€‚å®ç°ä¸€ä¸ªå‡½æ•°æ¥æŸ¥æ‰¾ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚ä½ åº”è¯¥å°½é‡å‡å°‘å¯¹è°ƒç”¨ API çš„æ¬¡æ•°ã€‚

ç¤ºä¾‹:
ç»™å®š n = 5ï¼Œå¹¶ä¸” version = 4 æ˜¯ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚
è°ƒç”¨ isBadVersion(3) -> false
è°ƒç”¨ isBadVersion(5)Â -> true
è°ƒç”¨ isBadVersion(4)Â -> true
æ‰€ä»¥ï¼Œ4 æ˜¯ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚Â 
```



> è§£æ

æ‰¾åˆ°ç¬¬ä¸€ä¸ªtrueï¼š

- æ‰©å¤§è“è‰²çš„æ¡ä»¶ï¼šm= flase (è¡¨ç¤ºé”™è¯¯çš„ç‰ˆæœ¬)
- è¿”å›`right` 

```java
0---------------first--------------N
      mid       mid       mid
     false      true      true
```

```java
public int firstBadVersion(int n) {
  long left = -1;
  long right = (long)n+1;

  while(left+1!=right){
    long m = (right-left)/2+left;
    if(isBadVersion(Integer.parseInt(String.valueOf(m)))==false){
      left = m;
    }else{
      right=m;
    }
  }
  return Integer.parseInt(String.valueOf(right));
}
```

## [34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®](https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/)

> é¢˜ç›®

```java
ç»™å®šä¸€ä¸ªæŒ‰ç…§å‡åºæ’åˆ—çš„æ•´æ•°æ•°ç»„ numsï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ targetã€‚æ‰¾å‡ºç»™å®šç›®æ ‡å€¼åœ¨æ•°ç»„ä¸­çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚
å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨ç›®æ ‡å€¼ targetï¼Œè¿”å›Â [-1, -1]ã€‚
è¿›é˜¶ï¼š
ä½ å¯ä»¥è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸ºÂ O(log n)Â çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ
Â 
ç¤ºä¾‹ 1ï¼š
è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 8
è¾“å‡ºï¼š[3,4]
ç¤ºä¾‹Â 2ï¼š
è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 6
è¾“å‡ºï¼š[-1,-1]
```



> è§£æ

æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªä½ç½®ï¼š [5,7,7,8,8,9] target=8

- æ‰©å¤§è“è‰²çš„æ¡ä»¶ï¼šnums[m]<8
- è¿”å›`right` 
- æ³¨æ„ä¸å­˜åœ¨çš„åœºæ™¯ï¼š`right==nums.length||nums[right]!=target`

æŸ¥æ‰¾å…ƒç´ çš„æœ€åä¸€ä¸ªä½ç½®ï¼š

- æ‰©å¤§è“è‰²çš„æ¡ä»¶ï¼šnums[m]<=8
- è¿”å›`left` 
- æ³¨æ„ä¸å­˜åœ¨çš„åœºæ™¯ï¼š`left==-1||nums[left]!=target`

```java
public int[] searchRange(int[] nums, int target) {
  int[] res = new int[2];

  // æ‰¾ä¸Šç•Œ
  int left = -1;
  int right = nums.length;

  while (left + 1 != right) {
    int m = (left + right) / 2;
    if (nums[m]<target){
      left = m;
    }else {
      right=m;
    }
  }
  if (right==nums.length||nums[right]!=target){
    res[0] = -1;
  }else {
    res[0] = right;
  }


  // æ‰¾ä¸‹ç•Œ
  left = -1;
  right = nums.length;

  while (left + 1 != right) {
    int m = (left + right) / 2;
    if (nums[m]<=target){
      left = m;
    }else {
      right=m;
    }
  }

  if (left==-1||nums[left]!=target){
    res[1] = -1;
  }else {
    res[1] = left;
  }

  return res;
}
```

## [153.å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/) â­ï¸

> é¢˜ç›®

```java
å·²çŸ¥ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ï¼Œé¢„å…ˆæŒ‰ç…§å‡åºæ’åˆ—ï¼Œç»ç”± 1 åˆ° n æ¬¡ æ—‹è½¬ åï¼Œå¾—åˆ°è¾“å…¥æ•°ç»„ã€‚ä¾‹å¦‚ï¼ŒåŸæ•°ç»„ nums = [0,1,2,4,5,6,7] åœ¨å˜åŒ–åå¯èƒ½å¾—åˆ°ï¼š
è‹¥æ—‹è½¬ 4 æ¬¡ï¼Œåˆ™å¯ä»¥å¾—åˆ° [4,5,6,7,0,1,2]
è‹¥æ—‹è½¬ 7 æ¬¡ï¼Œåˆ™å¯ä»¥å¾—åˆ° [0,1,2,4,5,6,7]
æ³¨æ„ï¼Œæ•°ç»„ [a[0], a[1], a[2], ..., a[n-1]] æ—‹è½¬ä¸€æ¬¡ çš„ç»“æœä¸ºæ•°ç»„ [a[n-1], a[0], a[1], a[2], ..., a[n-2]]ã€‚
ç»™ä½ ä¸€ä¸ªå…ƒç´ å€¼ äº’ä¸ç›¸åŒ çš„æ•°ç»„ nums ï¼Œå®ƒåŸæ¥æ˜¯ä¸€ä¸ªå‡åºæ’åˆ—çš„æ•°ç»„ï¼Œå¹¶æŒ‰ä¸Šè¿°æƒ…å½¢è¿›è¡Œäº†å¤šæ¬¡æ—‹è½¬ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›æ•°ç»„ä¸­çš„ æœ€å°å…ƒç´ ã€‚

ç¤ºä¾‹ 1ï¼š
è¾“å…¥ï¼šnums = [3,4,5,1,2]
è¾“å‡ºï¼š1
è§£é‡Šï¼šåŸæ•°ç»„ä¸º [1,2,3,4,5] ï¼Œæ—‹è½¬ 3 æ¬¡å¾—åˆ°è¾“å…¥æ•°ç»„ã€‚
ç¤ºä¾‹ 2ï¼š
è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2]
è¾“å‡ºï¼š0
è§£é‡Šï¼šåŸæ•°ç»„ä¸º [0,1,2,4,5,6,7] ï¼Œæ—‹è½¬ 4 æ¬¡å¾—åˆ°è¾“å…¥æ•°ç»„ã€‚
```

> è§£æ

- **ã€ŒäºŒåˆ†ã€çš„æœ¬è´¨æ˜¯ä¸¤æ®µæ€§ï¼Œå¹¶éå•è°ƒæ€§ã€‚åªè¦ä¸€æ®µæ»¡è¶³æŸä¸ªæ€§è´¨ï¼Œå¦å¤–ä¸€æ®µä¸æ»¡è¶³æŸä¸ªæ€§è´¨ï¼Œå°±å¯ä»¥ç”¨ã€ŒäºŒåˆ†ã€ã€‚**

- ç»è¿‡æ—‹è½¬çš„æ•°ç»„ï¼Œæ˜¾ç„¶å‰åŠæ®µæ»¡è¶³ `>= nums[0]`ï¼Œè€ŒååŠæ®µä¸æ»¡è¶³ `>= nums[0]`ã€‚æˆ‘ä»¬å¯ä»¥ä»¥æ­¤ä½œä¸ºä¾æ®æ¥åˆ’åˆ†è“çº¢åŒºé—´ã€‚
- æ‰©å¤§è“è‰²çš„æ¡ä»¶ï¼š`nums[m]>= nums[0]`
- è¿”å›`right` 

```java
public int findMin(int[] nums) {
  int left = -1;
  int right = nums.length;

  while (left+1!=right){
    int m = (right-left)/2+left;

    if (nums[m]>=nums[0]){ // è®°å¾—æœ‰=å·ï¼Œç‰¹æ®Šcase[2,1]
      left = m;
    }else {
      right = m;
    }
  }

  if (right==nums.length) return nums[0]; // æ—‹è½¬äº†ä¸€åœˆå›æ¥äº†,å¦‚[1,2,3,4]

  return nums[right];
}
```

## [154.å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼ II](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array-ii/description/) â­ï¸

> é¢˜ç›®

```java
å·²çŸ¥ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ï¼Œé¢„å…ˆæŒ‰ç…§å‡åºæ’åˆ—ï¼Œç»ç”± 1 åˆ° n æ¬¡ æ—‹è½¬ åï¼Œå¾—åˆ°è¾“å…¥æ•°ç»„ã€‚ä¾‹å¦‚ï¼ŒåŸæ•°ç»„ nums = [0,1,4,4,5,6,7] åœ¨å˜åŒ–åå¯èƒ½å¾—åˆ°ï¼š
è‹¥æ—‹è½¬ 4 æ¬¡ï¼Œåˆ™å¯ä»¥å¾—åˆ° [4,5,6,7,0,1,4]
è‹¥æ—‹è½¬ 7 æ¬¡ï¼Œåˆ™å¯ä»¥å¾—åˆ° [0,1,4,4,5,6,7]
æ³¨æ„ï¼Œæ•°ç»„ [a[0], a[1], a[2], ..., a[n-1]] æ—‹è½¬ä¸€æ¬¡ çš„ç»“æœä¸ºæ•°ç»„ [a[n-1], a[0], a[1], a[2], ..., a[n-2]] ã€‚
ç»™ä½ ä¸€ä¸ªå¯èƒ½å­˜åœ¨ é‡å¤ å…ƒç´ å€¼çš„æ•°ç»„ nums ï¼Œå®ƒåŸæ¥æ˜¯ä¸€ä¸ªå‡åºæ’åˆ—çš„æ•°ç»„ï¼Œå¹¶æŒ‰ä¸Šè¿°æƒ…å½¢è¿›è¡Œäº†å¤šæ¬¡æ—‹è½¬ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›æ•°ç»„ä¸­çš„ æœ€å°å…ƒç´  ã€‚

ç¤ºä¾‹ 1ï¼š
è¾“å…¥ï¼šnums = [1,3,5]
è¾“å‡ºï¼š1
ç¤ºä¾‹ 2ï¼š
è¾“å…¥ï¼šnums = [2,2,2,0,1]
è¾“å‡ºï¼š0
  
æç¤ºï¼š
n == nums.length
1 <= n <= 5000
-5000 <= nums[i] <= 5000
nums åŸæ¥æ˜¯ä¸€ä¸ªå‡åºæ’åºçš„æ•°ç»„ï¼Œå¹¶è¿›è¡Œäº† 1 è‡³ n æ¬¡æ—‹è½¬
```



> è§£æ

- ä¸åŒçš„æ˜¯ï¼Œæœ¬é¢˜å…ƒç´ å¹¶ä¸å”¯ä¸€ã€‚
- è¿™æ„å‘³ç€æˆ‘ä»¬æ— æ³•ç›´æ¥æ ¹æ®ä¸ nums[0] çš„å¤§å°å…³ç³»ï¼Œå°†æ•°ç»„åˆ’åˆ†ä¸ºä¸¤æ®µï¼Œå³æ— æ³•é€šè¿‡ã€ŒäºŒåˆ†ã€æ¥æ‰¾åˆ°æ—‹è½¬ç‚¹ã€‚å› ä¸ºã€ŒäºŒåˆ†ã€çš„æœ¬è´¨æ˜¯äºŒæ®µæ€§ï¼Œå¹¶éå•è°ƒæ€§ã€‚åªè¦ä¸€æ®µæ»¡è¶³æŸä¸ªæ€§è´¨ï¼Œå¦å¤–ä¸€æ®µä¸æ»¡è¶³æŸä¸ªæ€§è´¨ï¼Œå°±å¯ä»¥ç”¨ã€ŒäºŒåˆ†ã€ã€‚
- ä½†å¦‚æœæ—‹è½¬ç‚¹ä½¿å¾—ç›¸åŒå…ƒç´ è¿›è¡Œäº†åˆ†è£‚å°†ä¼šå¤±å»ä¸¤æ®µæ€§ï¼Œå¦‚`[01222345] =>[23450122]`ã€‚æˆ‘ä»¬éœ€è¦åšä¸€äº›é¢„å¤„ç†æ“ä½œï¼Œä½¿å¾—å…¶äºŒæ®µæ€§æ¢å¤æ–¹ä¾¿æˆ‘ä»¬é€šè¿‡ã€ŒäºŒåˆ†ã€æ‰¾æ—‹è½¬ç‚¹ã€‚**æˆ‘ä»¬å¯ä»¥å°†æ–°æ•°ç»„å°¾éƒ¨ä¸nums[0]ç›¸åŒçš„å…ƒç´ å¿½ç•¥ä½¿å¾—å…¶äºŒæ®µæ€§æ¢å¤ã€‚**

- é¢„å¤„ç†ï¼š**åˆ é™¤æ•°ç»„æœ«å°¾ä¸Šæ‰€æœ‰ä¸nums[0]ç›¸åŒçš„æ•°ï¼Œå³æŠŠrightæŒ‡é’ˆæŒ‡åˆ°æœ€åä¸€ä¸ªç­‰äºnums[0]çš„æ•°ã€‚ç„¶åç»§ç»­åˆ’åˆ†çº¢è“åŒºé—´ï¼š**
- æ‰©å¤§è“è‰²çš„æ¡ä»¶ï¼š`nums[m]>= nums[0]`
- è¿”å›`right` ,å³æ—‹è½¬ç‚¹(æœ€å°æ•°çš„ä¸‹æ ‡+1)

```java
public int findMin(int[] nums) {
  int left = -1;
  int right = nums.length;

  while (right>1 && nums[0] == nums[right-1]) right--; // é˜²æ­¢æŠŠæ‰€æœ‰æ•°éƒ½åˆ å…‰äº†

  while (left+1!=right){
    int m = (right-left)/2+left;

    if (nums[m]>=nums[0]){
      left = m;
    }else {
      right = m;
    }
  }

  if (right==nums.length) return nums[0];

  return nums[right];
}
```



## [33.æœç´¢æ—‹è½¬æ’åºæ•°ç»„](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/)

> é¢˜ç›®

```java
æ•´æ•°æ•°ç»„ nums æŒ‰å‡åºæ’åˆ—ï¼Œæ•°ç»„ä¸­çš„å€¼ äº’ä¸ç›¸åŒ ã€‚
åœ¨ä¼ é€’ç»™å‡½æ•°ä¹‹å‰ï¼Œnums åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªä¸‹æ ‡ kï¼ˆ0 <= k < nums.lengthï¼‰ä¸Šè¿›è¡Œäº† æ—‹è½¬ï¼Œä½¿æ•°ç»„å˜ä¸º [nums[k], nums[k+1], ..., nums[n-1], nums[0], nums[1], ..., nums[k-1]]ï¼ˆä¸‹æ ‡ ä» 0 å¼€å§‹ è®¡æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼Œ [0,1,2,4,5,6,7] åœ¨ä¸‹æ ‡ 3 å¤„ç»æ—‹è½¬åå¯èƒ½å˜ä¸ºÂ [4,5,6,7,0,1,2] ã€‚
ç»™ä½  æ—‹è½¬å çš„æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° target ï¼Œå¦‚æœ nums ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ target ï¼Œåˆ™è¿”å›å®ƒçš„ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å›Â -1Â ã€‚

ç¤ºä¾‹ 1ï¼š
è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 0
è¾“å‡ºï¼š4
ç¤ºä¾‹Â 2ï¼š
è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 3
è¾“å‡ºï¼š-1
ç¤ºä¾‹ 3ï¼š
è¾“å…¥ï¼šnums = [1], target = 0
è¾“å‡ºï¼š-1
```

> è§£æ

- å…ˆæ‰¾åˆ° ã€Œ153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼ã€çš„ç´¢å¼•ï¼Œç”±æ­¤å¯ä»¥å°†æ•°ç»„åˆ†ä¸ºå‡åºçš„ä¸¤æ®µã€‚
- æ ¹æ® nums[0] ä¸ target çš„å…³ç³»åˆ¤æ–­ target åœ¨å·¦æ®µè¿˜æ˜¯å³æ®µï¼Œå†å¯¹å‡åºæ•°ç»„è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾å³å¯ã€‚

```java
public int search(int[] nums, int target) {
  int index = findMin(nums); // æ—‹è½¬ç‚¹
  int left = 0;
  int right = 0;

  // æ ¹æ® nums[0] ä¸ target çš„å…³ç³»åˆ¤æ–­ target åœ¨å·¦æ®µè¿˜æ˜¯å³æ®µï¼Œå†å¯¹å‡åºæ•°ç»„è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾å³å¯ã€‚
  // [4,5,6,7,0,1,2]
  if (target>=nums[0]){ 
    // target åœ¨å·¦æ®µ
    left = -1;
    right = index;
  }else {
    // target åœ¨å³æ®µ
    if (index==nums.length){
      left = -1;
    }else {
      left = index-1;
    }

    right = nums.length;
  }

  // äºŒåˆ†æŸ¥æ‰¾targetï¼Œæ— é‡å¤å…ƒç´ 
  while (left+1!=right){
    int m = (right-left)/2+left;
    if (nums[m]<=target){
      left= m;
    }else {
      right = m;
    }
  }

  if (left==-1||nums[left]!=target){
    left=-1;
  }

  return left;

}

// è¿”å›æ—‹è½¬æ•°ç»„çš„æœ€å°å€¼ä¸‹æ ‡
public int findMin(int[] nums) {
  int left = -1;
  int right = nums.length;

  while (left+1!=right){
    int m = (right-left)/2+left;

    if (nums[m]>=nums[0]){ // è®°å¾—æœ‰=å·ï¼Œç‰¹æ®Šcase[2,1]
      left = m;
    }else {
      right = m;
    }
  }

  if (right==nums.length) return right; // æ—‹è½¬äº†ä¸€åœˆå›æ¥äº†,å¦‚[1,2,3,4]ã€‚è¿”å›çš„ä¸‹æ ‡ä¸æ˜¯å€¼

  return right;
}
```

## [81. æœç´¢æ—‹è½¬æ’åºæ•°ç»„ II](https://leetcode-cn.com/problems/search-in-rotated-sorted-array-ii/)

> é¢˜ç›®

```java
å·²çŸ¥å­˜åœ¨ä¸€ä¸ªæŒ‰éé™åºæ’åˆ—çš„æ•´æ•°æ•°ç»„ nums ï¼Œæ•°ç»„ä¸­çš„å€¼ä¸å¿…äº’ä¸ç›¸åŒã€‚
åœ¨ä¼ é€’ç»™å‡½æ•°ä¹‹å‰ï¼Œnums åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªä¸‹æ ‡ kï¼ˆ0 <= k < nums.lengthï¼‰ä¸Šè¿›è¡Œäº† æ—‹è½¬ ï¼Œä½¿æ•°ç»„å˜ä¸º [nums[k], nums[k+1], ..., nums[n-1], nums[0], nums[1], ..., nums[k-1]]ï¼ˆä¸‹æ ‡ ä» 0 å¼€å§‹ è®¡æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼Œ [0,1,2,4,4,4,5,6,6,7] åœ¨ä¸‹æ ‡ 5 å¤„ç»æ—‹è½¬åå¯èƒ½å˜ä¸º [4,5,6,6,7,0,1,2,4,4] ã€‚
ç»™ä½  æ—‹è½¬å çš„æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° target ï¼Œè¯·ä½ ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ç»™å®šçš„ç›®æ ‡å€¼æ˜¯å¦å­˜åœ¨äºæ•°ç»„ä¸­ã€‚å¦‚æœ nums ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ target ï¼Œåˆ™è¿”å› true ï¼Œå¦åˆ™è¿”å› false ã€‚

ç¤ºä¾‹Â 1ï¼š
è¾“å…¥ï¼šnums = [2,5,6,0,0,1,2], target = 0
è¾“å‡ºï¼štrue
ç¤ºä¾‹Â 2ï¼š
è¾“å…¥ï¼šnums = [2,5,6,0,0,1,2], target = 3
è¾“å‡ºï¼šfalse
```

> è§£æ

- é¢„å¤„ç†æ¢å¤äºŒæ®µæ€§ï¼š**åˆ é™¤æ•°ç»„æœ«å°¾ä¸Šæ‰€æœ‰ä¸nums[0]ç›¸åŒçš„æ•°ï¼Œå³æŠŠrightæŒ‡é’ˆæŒ‡åˆ°æœ€åä¸€ä¸ªç­‰äºnums[0]çš„æ•°ã€‚**
- å…ˆæ‰¾åˆ° ã€Œ153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼ã€çš„ç´¢å¼•ï¼Œç”±æ­¤å¯ä»¥å°†æ•°ç»„åˆ†ä¸ºå‡åºçš„ä¸¤æ®µã€‚
- æ ¹æ® nums[0] ä¸ target çš„å…³ç³»åˆ¤æ–­ target åœ¨å·¦æ®µè¿˜æ˜¯å³æ®µï¼Œå†å¯¹å‡åºæ•°ç»„è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾å³å¯ã€‚

```java
public boolean search(int[] nums, int target) {
  int index = findMin(nums); // æ—‹è½¬ç‚¹
  int left = 0;
  int right = 0;

  // æ ¹æ® nums[0] ä¸ target çš„å…³ç³»åˆ¤æ–­ target åœ¨å·¦æ®µè¿˜æ˜¯å³æ®µï¼Œå†å¯¹å‡åºæ•°ç»„è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾å³å¯ã€‚
  // [4,5,6,7,0,1,2]
  if (target>=nums[0]){
    // target åœ¨å·¦æ®µ
    left = -1;
    right = index;
  }else {
    // target åœ¨å³æ®µ
    if (index==nums.length){
      left = -1;
    }else {
      left = index-1;
    }

    right = nums.length;
  }

  // äºŒåˆ†æŸ¥æ‰¾targetï¼Œæ— é‡å¤å…ƒç´ 
  while (left+1!=right){
    int m = (right-left)/2+left;
    if (nums[m]<=target){
      left= m;
    }else {
      right = m;
    }
  }

  if (left==-1||nums[left]!=target){
    return false;
  }

  return true;

}

// è¿”å›æ—‹è½¬æ•°ç»„çš„æœ€å°å€¼ä¸‹æ ‡
public int findMin(int[] nums) {


  int left = -1;
  int right = nums.length;

  // é¢„å¤„ç†æ¢å¤äºŒæ®µæ€§
  while (right>1&&nums[0]==nums[right-1]) right--;


  while (left+1!=right){
    int m = (right-left)/2+left;

    if (nums[m]>=nums[0]){ // è®°å¾—æœ‰=å·ï¼Œç‰¹æ®Šcase[2,1]
      left = m;
    }else {
      right = m;
    }
  }

  if (right==nums.length) return right; // æ—‹è½¬äº†ä¸€åœˆå›æ¥äº†,å¦‚[1,2,3,4]

  return right;
}
```

## [162. å¯»æ‰¾å³°å€¼](https://leetcode-cn.com/problems/find-peak-element/) â­ï¸

> é¢˜ç›®

```java
å³°å€¼å…ƒç´ æ˜¯æŒ‡å…¶å€¼å¤§äºå·¦å³ç›¸é‚»å€¼çš„å…ƒç´ ã€‚
ç»™ä½ ä¸€ä¸ªè¾“å…¥æ•°ç»„Â numsï¼Œæ‰¾åˆ°å³°å€¼å…ƒç´ å¹¶è¿”å›å…¶ç´¢å¼•ã€‚æ•°ç»„å¯èƒ½åŒ…å«å¤šä¸ªå³°å€¼ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿”å› ä»»ä½•ä¸€ä¸ªå³°å€¼ æ‰€åœ¨ä½ç½®å³å¯ã€‚
ä½ å¯ä»¥å‡è®¾Â nums[-1] = nums[n] = -âˆ ã€‚ // è¿™å°±ä»£è¡¨ç€ åªè¦æ•°ç»„ä¸­å­˜åœ¨ä¸€ä¸ªå…ƒç´ æ¯”ç›¸é‚»å…ƒç´ å¤§ï¼Œé‚£ä¹ˆæ²¿ç€å®ƒä¸€å®šå¯ä»¥æ‰¾åˆ°ä¸€ä¸ªå³°å€¼

ç¤ºä¾‹ 1ï¼š
è¾“å…¥ï¼šnums = [1,2,3,1]
è¾“å‡ºï¼š2
è§£é‡Šï¼š3 æ˜¯å³°å€¼å…ƒç´ ï¼Œä½ çš„å‡½æ•°åº”è¯¥è¿”å›å…¶ç´¢å¼• 2ã€‚
ç¤ºä¾‹Â 2ï¼š
è¾“å…¥ï¼šnums = [1,2,1,3,5,6,4]
è¾“å‡ºï¼š1 æˆ– 5 
è§£é‡Šï¼šä½ çš„å‡½æ•°å¯ä»¥è¿”å›ç´¢å¼• 1ï¼Œå…¶å³°å€¼å…ƒç´ ä¸º 2ï¼›æˆ–è€…è¿”å›ç´¢å¼• 5ï¼Œ å…¶å³°å€¼å…ƒç´ ä¸º 6ã€‚
```

> è§£æ

è¿™é¢˜çœ‹ç€å¤æ‚ï¼Œå…¶å®æŒºç®€å•ï¼Œä»–çš„ä¸¤æ®µæ€§åœ¨æ•°æ®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾ï¼š

- ä¸Šå‡åŒºåŸŸçš„ä¸Šç•Œï¼Œä¸Šå‡åŒºåŸŸå¿…ç„¶æœ‰nums[mid]>nums[mid-1]
- ä¸‹é™åŒºåŸŸçš„ä¸‹ç•Œï¼Œä¸‹é™åŒºåŸŸå¿…ç„¶æœ‰nums[mid]>nums[mid+1]
- å½“ç„¶è¿˜éœ€è¦è€ƒè™‘midåœ¨ä¸¤ä¾§çš„æƒ…å†µï¼Œè¿™é‡Œæˆ‘ä»¬é€‰ç¬¬ä¸€ç§åšæ³•å§ã€‚

```java
        /\
   /\  /  \
\ /  \/    \
            \
public int findPeakElement(int[] nums) {
  int left = -1;
  int right = nums.length;

  while (left+1!=right){
    int m = (right-left)/2+left;
    if (m==0||nums[m]>nums[m-1]){ // m==0 ä¿è¯æœ‰è¿›åœºèµ„æ ¼
      left = m;
    }else {
      right = m;
    }
  }
  return left;
}
```

## [658. æ‰¾åˆ° K ä¸ªæœ€æ¥è¿‘çš„å…ƒç´ ](https://leetcode-cn.com/problems/find-k-closest-elements/)

> é¢˜ç›®

```java
ç»™å®šä¸€ä¸ªæ’åºå¥½çš„æ•°ç»„Â arr ï¼Œä¸¤ä¸ªæ•´æ•° k å’Œ x ï¼Œä»æ•°ç»„ä¸­æ‰¾åˆ°æœ€é è¿‘ xï¼ˆä¸¤æ•°ä¹‹å·®æœ€å°ï¼‰çš„ k ä¸ªæ•°ã€‚è¿”å›çš„ç»“æœå¿…é¡»è¦æ˜¯æŒ‰å‡åºæ’å¥½çš„ã€‚
æ•´æ•° a æ¯”æ•´æ•° b æ›´æ¥è¿‘ x éœ€è¦æ»¡è¶³ï¼š
|a - x| < |b - x| æˆ–è€…
|a - x| == |b - x| ä¸” a < b

ç¤ºä¾‹ 1ï¼š
è¾“å…¥ï¼šarr = [1,2,3,4,5], k = 4, x = 3
è¾“å‡ºï¼š[1,2,3,4]
ç¤ºä¾‹ 2ï¼š
è¾“å…¥ï¼šarr = [1,2,3,4,5], k = 4, x = -1
è¾“å‡ºï¼š[1,2,3,4]
```



> è§£æ

è¿™é¢˜å…¶å®å°±æ˜¯æ‰¾åˆ°è·ç¦»targetæœ€æ¥è¿‘çš„å…ƒç´ ï¼Œå³æ‰¾ `>=target`çš„ä¸‹ç•Œçš„ç´¢å¼•ã€‚ç„¶åå‘ä¸¤è¾¹æ‰©æ•£æ‰¾å‡ºkä¸ªæ•°ã€‚

```java
public List<Integer> findClosestElements(int[] arr, int k, int x) {
  ArrayList<Integer> res = new ArrayList<>();

  // äºŒåˆ†æ‰¾åˆ° >=x çš„ä¸‹ç•Œ
  int left = -1;
  int right = arr.length;
  while (left+1!=right){
    int m = (right-left)/2+left;
    if (arr[m]<x){
      left = m;
    }else {
      right = m;
    }
  }

  // æ­¤æ—¶rightä¸ºåˆšå¥½å°äºç­‰äºxçš„æ•°çš„ä¸‹æ ‡
  left = right-1;

  while (res.size()!=k){
    if (right==arr.length||left>=0&&Math.abs(x-arr[left])<=Math.abs(arr[right]-x)){
      res.add(0,arr[left]);
      left--;
    }else if (right<arr.length){
      res.add(arr[right]);
      right++;
    }
  }
  return res;
}
```

## [744. å¯»æ‰¾æ¯”ç›®æ ‡å­—æ¯å¤§çš„æœ€å°å­—æ¯](https://leetcode-cn.com/problems/find-smallest-letter-greater-than-target/)

> é¢˜ç›®

```java
ç»™ä½ ä¸€ä¸ªæ’åºåçš„å­—ç¬¦åˆ—è¡¨ letters ï¼Œåˆ—è¡¨ä¸­åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯ã€‚å¦ç»™å‡ºä¸€ä¸ªç›®æ ‡å­—æ¯Â targetï¼Œè¯·ä½ å¯»æ‰¾åœ¨è¿™ä¸€æœ‰åºåˆ—è¡¨é‡Œæ¯”ç›®æ ‡å­—æ¯å¤§çš„æœ€å°å­—æ¯ã€‚
åœ¨æ¯”è¾ƒæ—¶ï¼Œå­—æ¯æ˜¯ä¾åºå¾ªç¯å‡ºç°çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼š
å¦‚æœç›®æ ‡å­—æ¯ target = 'z' å¹¶ä¸”å­—ç¬¦åˆ—è¡¨ä¸ºÂ letters = ['a', 'b']ï¼Œåˆ™ç­”æ¡ˆè¿”å›Â 'a'
Â 
ç¤ºä¾‹ï¼š
è¾“å…¥:
letters = ["c", "f", "j"]
target = "a"
è¾“å‡º: "c"
è¾“å…¥:
letters = ["c", "f", "j"]
target = "c"
è¾“å‡º: "f"
```

> è§£æ

- å…¸å‹çš„æ‰¾ä¸‹ç•Œé¢˜ç›®ã€‚ç¡®å®šè“è‰²åŒºåŸŸèŒƒå›´ï¼šletters[m] < target
- return right

```java

```



## [167. ä¸¤æ•°ä¹‹å’Œ II - è¾“å…¥æœ‰åºæ•°ç»„](https://leetcode-cn.com/problems/two-sum-ii-input-array-is-sorted/)

> é¢˜ç›®

```java
ç»™ä½ ä¸€ä¸ªæ’åºåçš„å­—ç¬¦åˆ—è¡¨ letters ï¼Œåˆ—è¡¨ä¸­åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯ã€‚å¦ç»™å‡ºä¸€ä¸ªç›®æ ‡å­—æ¯Â targetï¼Œè¯·ä½ å¯»æ‰¾åœ¨è¿™ä¸€æœ‰åºåˆ—è¡¨é‡Œæ¯”ç›®æ ‡å­—æ¯å¤§çš„æœ€å°å­—æ¯ã€‚
åœ¨æ¯”è¾ƒæ—¶ï¼Œå­—æ¯æ˜¯ä¾åºå¾ªç¯å‡ºç°çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼š
å¦‚æœç›®æ ‡å­—æ¯ target = 'z' å¹¶ä¸”å­—ç¬¦åˆ—è¡¨ä¸ºÂ letters = ['a', 'b']ï¼Œåˆ™ç­”æ¡ˆè¿”å›Â 'a'
Â 
ç¤ºä¾‹ï¼š
è¾“å…¥:
letters = ["c", "f", "j"]
target = "a"
è¾“å‡º: "c"
è¾“å…¥:
letters = ["c", "f", "j"]
target = "c"
è¾“å‡º: "f"
```

> è§£æ

- è“è‰²åŒºåŸŸåŒ…å«æ‰€æœ‰å°äºç­‰äºtargetçš„å­—ç¬¦

```java
public char nextGreatestLetter(char[] letters, char target) {

  int left = -1;
  int right = letters.length;

  while (left+1!=right){
    int m = (right-left)/2+left;
    if (letters[m]<=target){
      left = m;
    }else{
      right = m;
    }
  }

  return right==letters.length?letters[0]:letters[right]; //å¦‚æœæ²¡æœ‰æ‰¾åˆ°å°±è¿”å›ç¬¬ä¸€ä¸ªå­—ç¬¦
}
```



## [167. ä¸¤æ•°ä¹‹å’Œ II - è¾“å…¥æœ‰åºæ•°ç»„](https://leetcode-cn.com/problems/two-sum-ii-input-array-is-sorted/)

> é¢˜ç›®

```java
ç»™å®šä¸€ä¸ªå·²æŒ‰ç…§ å‡åºæ’åˆ—Â  çš„æ•´æ•°æ•°ç»„Â numbers ï¼Œè¯·ä½ ä»æ•°ç»„ä¸­æ‰¾å‡ºä¸¤ä¸ªæ•°æ»¡è¶³ç›¸åŠ ä¹‹å’Œç­‰äºç›®æ ‡æ•°Â target ã€‚
å‡½æ•°åº”è¯¥ä»¥é•¿åº¦ä¸º 2 çš„æ•´æ•°æ•°ç»„çš„å½¢å¼è¿”å›è¿™ä¸¤ä¸ªæ•°çš„ä¸‹æ ‡å€¼ã€‚numbers çš„ä¸‹æ ‡ ä» 1 å¼€å§‹è®¡æ•° ï¼Œæ‰€ä»¥ç­”æ¡ˆæ•°ç»„åº”å½“æ»¡è¶³ 1 <= answer[0] < answer[1] <= numbers.lengthã€‚
ä½ å¯ä»¥å‡è®¾æ¯ä¸ªè¾“å…¥åªå¯¹åº”å”¯ä¸€çš„ç­”æ¡ˆï¼Œè€Œä¸”ä½ ä¸å¯ä»¥é‡å¤ä½¿ç”¨ç›¸åŒçš„å…ƒç´ ã€‚

ç¤ºä¾‹ 1ï¼š
è¾“å…¥ï¼šnumbers = [2,7,11,15], target = 9
è¾“å‡ºï¼š[1,2]
è§£é‡Šï¼š2 ä¸ 7 ä¹‹å’Œç­‰äºç›®æ ‡æ•° 9 ã€‚å› æ­¤ index1 = 1, index2 = 2 ã€‚
ç¤ºä¾‹ 2ï¼š
è¾“å…¥ï¼šnumbers = [2,3,4], target = 6
è¾“å‡ºï¼š[1,3]
```





> è§£æ

åœ¨æ•°ç»„ä¸­æ‰¾åˆ°ä¸¤ä¸ªæ•°ï¼Œä½¿å¾—å®ƒä»¬çš„å’Œç­‰äºç›®æ ‡å€¼ï¼Œå¯ä»¥é¦–å…ˆå›ºå®šç¬¬ä¸€ä¸ªæ•°ï¼Œç„¶åå¯»æ‰¾ç¬¬äºŒä¸ªæ•°ï¼Œç¬¬äºŒä¸ªæ•°ç­‰äºç›®æ ‡å€¼å‡å»ç¬¬ä¸€ä¸ªæ•°çš„å·®ã€‚åˆ©ç”¨æ•°ç»„çš„æœ‰åºæ€§è´¨ï¼Œå¯ä»¥é€šè¿‡äºŒåˆ†æŸ¥æ‰¾çš„æ–¹æ³•å¯»æ‰¾ç¬¬äºŒä¸ªæ•°ã€‚ä¸ºäº†é¿å…é‡å¤å¯»æ‰¾ï¼Œåœ¨å¯»æ‰¾ç¬¬äºŒä¸ªæ•°æ—¶ï¼Œåªåœ¨ç¬¬ä¸€ä¸ªæ•°çš„å³ä¾§å¯»æ‰¾ã€‚

```java
public int[] twoSum(int[] numbers, int target) {

  for (int i = 0; i < numbers.length; i++) {
    int left = i;
    int right = numbers.length;

    while (left+1!=right){
      int m  = (right-left)/2+left;
      if (numbers[m]<target-numbers[i]){
        left = m;
      }else {
        right = m;
      }
    }

    if (right==numbers.length||numbers[right]!=target-numbers[i]){
      continue;
    }
    return new int[]{i+1,right+1};
  }
  return new int[]{-1,-1};
}
```

