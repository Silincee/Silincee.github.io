---
layout: post
title:  "Java设计模式之结构型模式"
date:   2020-09-13 09:58:06 +0800--
categories: [Java, 其他]
tags: [设计模式, ]  

---

# 适配器模式

基本介绍：

- 适配器模式(AdapterPattern)将某个类的接口转换成客户端期望的另一个接口表示，***主的目的是兼容性，让原本因接口不匹配不能一起工作的两个类可以协同工作***。其别名为包装器(Wrapper)。
- 适配器模式属于结构型模式
- 主要分为三类:类适配器模式、对象适配器模式、接口适配器模式

工作原理：

- ***适配器模式:将一个类的接口转换成另一种接口.让原本接口不兼容的类可以兼容***
- 从用户的角度看不到被适配者，是解耦的
- 用户调用适配器转化出来的目标接口方法，适配器再调用被适配者的相关接口方法
- 用户收到反馈结果，感觉只是和目标接口交互，如图

![image-20200914213109728](/assets/imgs/image-20200914213109728.png)

## [类适配器模式](https://github.com/Silincee/Design-pattern/tree/master/src/main/java/com/atguigu/adapter/classadapter)

**类适配器模式介绍**：Adapter 类，通过继承 src 类，实现 dst 类接口，完成 src->dst 的适配。

**类适配器模式应用实例**：

以生活中充电器的例子来讲解适配器，充电器本身相当于 Adapter，220V 交流电相当于 src (即被适配者)，我们 的目 dst(即 目标)是 5V 直流电

![image-20200914222241945](/assets/imgs/image-20200914222241945.png)

**类适配器模式注意事项和细节**：

- ***Java 是单继承机制，所以类适配器需要继承 src 类这一点算是一个缺点***, 因为这要求 dst 必须是接口，有一定局 限性;
- ***src 类的方法在 Adapter 中都会暴露出来，也增加了使用的成本。***
- 优点：由于其继承了src类，所以它可以根据需求重写src类的方法，使得***Adapter的灵活性增强***了。

## [对象适配器模式](https://github.com/Silincee/Design-pattern/tree/master/src/main/java/com/atguigu/adapter/objectadapter)

- 本思路和类的适配器模式相同，只是将Adapter类作修改，不是继承src类，而是持有src类的实例，以解决

  兼容性的问题。 即:持有 src 类，实现 dst 类接口，完成 src->dst 的适配

- 根据***“合成复用原则”***，在系统中尽量使用***关联关系(聚合)***来替代继承关系。

- 对象适配器模式是适配器模式常用的一种

应用实例说明:

以生活中充电器的例子来讲解适配器，充电器本身相当于 Adapter，220V 交流电相当于 src (即被适配者)，我们 的目 dst(即目标)是 5V 直流电，使用对象适配器模式完成。

![image-20200915183214205](/assets/imgs/image-20200915183214205.png)

对象适配器模式注意事项和细节:

- ***对象适配器和类适配器其实算是同一种思想，只不过实现方式不同。 根据合成复用原则，使用组合替代继承， 所以它解决了类适配器必须继承 src 的局限性问题，也不再要求 dst 必须是接口。***
- 使用成本更低，更灵活。

## 接口适配器模式

- 一些书籍称为:适配器模式(DefaultAdapterPattern)或缺省适配器模式。
- ***核心思路:当不需要全部实现接口提供的方法时，可先设计一个抽象类实现接口，并为该接口中每个方法提供一个默认实现(空方法)，那么该抽象类的子类可有选择地覆盖父类的某些方法来实现需求***
- 适用于***一个接口不想使用其所有的方法***的情况。

 ![image-20200915190559858](/assets/imgs/image-20200915190559858.png)

